{% extends 'base.html' %}
{% load static %}

{% block title %}ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù†{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
        <div>
            <h1 class="text-4xl font-bold text-gray-900 mb-2 flex items-center gap-3">
                <span>ğŸ“</span>
                <span>ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù†</span>
            </h1>
            <p class="text-gray-600">ØªÙ…Ø§Ù… ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ Ø¯Ø± ÛŒÚ©Ø¬Ø§</p>
        </div>
        {% if note_items %}
        <form method="post" action="{% url 'menu:notes_clear' %}" onsubmit="return confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù‡Ù…Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯ØŸ');">
            {% csrf_token %}
            <button type="submit" class="px-6 py-3 bg-red-100 text-red-700 rounded-xl hover:bg-red-200 transition-colors font-semibold">
                ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡
            </button>
        </form>
        {% endif %}
    </div>

    <!-- Notes Grid -->
    {% if note_items %}
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for entry in note_items %}
        <div class="bg-white rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border-2 border-transparent hover:border-indigo-200 group">
            <!-- Item Image -->
            <div class="relative h-48 bg-gradient-to-br from-indigo-100 to-purple-100 overflow-hidden">
                {% if entry.item.primary_image %}
                <img src="{{ entry.item.primary_image.url }}" alt="{{ entry.item.name }}" 
                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                {% else %}
                <div class="w-full h-full flex items-center justify-center">
                    <span class="text-7xl opacity-30">ğŸ½ï¸</span>
                </div>
                {% endif %}
                <div class="absolute top-4 right-4 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-semibold text-indigo-600">
                    {{ entry.item.category.business.name }}
                </div>
            </div>
            
            <!-- Note Content -->
            <div class="p-6">
                <h3 class="text-xl font-bold text-gray-900 mb-2">{{ entry.item.name }}</h3>
                <p class="text-gray-500 text-sm mb-4">{{ entry.item.category.title }}</p>
                
                <div class="bg-indigo-50 rounded-2xl p-4 mb-4 border border-indigo-100">
                    <p class="text-gray-700 leading-relaxed">{{ entry.note|default:"Ø¨Ø¯ÙˆÙ† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª" }}</p>
                </div>
                
                <div class="flex gap-2 pt-4 border-t border-gray-100">
                    <a href="{% url 'menu:item_detail' entry.item.category.business.slug entry.item.slug %}" 
                       class="flex-1 text-center px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors font-semibold">
                        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„
                    </a>
                    <form method="post" action="{% url 'menu:remove_note' entry.item.category.business.slug entry.item.id %}" 
                          onsubmit="return confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ');" class="inline">
                        {% csrf_token %}
                        <input type="hidden" name="next" value="{% url 'menu:notes' %}">
                        <button type="submit" class="px-4 py-2 bg-red-100 text-red-700 rounded-xl hover:bg-red-200 transition-colors font-semibold">
                            ğŸ—‘ï¸
                        </button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-20 bg-white rounded-3xl shadow-lg">
        <span class="text-9xl mb-6 block">ğŸ“</span>
        <h2 class="text-3xl font-bold text-gray-900 mb-4">ÛŒØ§Ø¯Ø¯Ø§Ø´ØªÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</h2>
        <p class="text-gray-600 mb-8">Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯ Ùˆ Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…ÙˆØ±Ø¯ Ø¹Ù„Ø§Ù‚Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯</p>
        <a href="{% url 'menu:home' %}" 
           class="inline-block px-8 py-4 bg-indigo-600 text-white rounded-2xl hover:bg-indigo-700 transition-colors font-semibold shadow-lg hover:shadow-xl">
            ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
